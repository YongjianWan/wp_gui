# Weekly Progre- 🔔 **桌面通知**: 系统通知提醒和状态更新

## 系统要求 💻

### Windows
- **操作系统**: Windows 7/8/10/11
- **Python版本**: Python 3.6+ 
- **内存**: 最少 512MB RAM
- **存储**: 50MB 可用空间
- **其他**: 支持系统托盘的桌面环境

### macOS  
- **操作系统**: macOS 10.12+ (Sierra 或更高版本)
- **Python版本**: Python 3.6+
- **内存**: 最少 512MB RAM  
- **存储**: 50MB 可用空间
- **其他**: 支持菜单栏图标显示

### 依赖包
- **必需**: `pillow`（图像处理）, `pystray`（系统托盘）
- **可选**: `plyer`（桌面通知，增强体验）
- **内置**: `tkinter`（GUI界面，Python标准库）

## 安装教程 🛠️Tracker 📅

一个简洁高效的周记进度跟踪应用，经过完全重构和bug修复，提供稳定可靠的记录体验。

## 功能特点 ✨

- 📝 **智能周记录**: 自动创建周进度文件，支持模板插入
- ✅ **任务管理**: 添加、完成、跟踪待办事项
- 🎯 **快速记录**: 系统托盘快速添加笔记  
- 📊 **数据统计**: 自动生成周报告和完成率统计
- 🔄 **自动归档**: 新周开始时自动归档历史记录
- 🎨 **优化界面**: 清晰美观的用户界面，响应式设计
- 💾 **可靠保存**: 实时保存，完善的错误处理
- 🚀 **开机自启**: 支持Windows开机自动启动
- ⏰ **定时提醒**: 可配置的定时提醒功能
- 🔔 **桌面通知**: 系统通知提醒和状态更新

## 安装教程 �️

### Windows 系统安装

#### 步骤 1: 安装 Python
1. 访问 [Python官网](https://www.python.org/downloads/) 下载最新版本
2. 运行安装程序，**重要：勾选 "Add Python to PATH"**
3. 选择 "Install Now" 完成安装
4. 打开命令提示符，输入 `python --version` 验证安装

#### 步骤 2: 安装依赖包
打开命令提示符（Win+R 输入 cmd），执行：
```bash
pip install pillow pystray plyer
```

#### 步骤 3: 下载程序
1. 下载所有文件到一个文件夹（如 `C:\WeeklyTracker\`）
2. 确保包含以下文件：
   - `wp_gui_final.py`
   - `start_tracker.bat`
   - `wp_icon.ico`
   - `README.md`

#### 步骤 4: 运行程序
- **方式一（推荐）**: 双击 `start_tracker.bat`
- **方式二**: 在文件夹中按住Shift+右键，选择"在此处打开命令窗口"，输入：
  ```bash
  python wp_gui_final.py
  ```

#### 步骤 5: 设置开机自启（可选）
1. 运行程序后，右键系统托盘图标选择"打开"
2. 点击"⚙️ 设置"按钮
3. 勾选"开机自动启动"
4. 点击"保存设置"

---

### macOS 系统安装

#### 步骤 1: 安装 Python
1. **方式一：使用 Homebrew（推荐）**
   ```bash
   # 安装 Homebrew（如果未安装）
   /bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"
   
   # 安装 Python
   brew install python
   ```

2. **方式二：官网下载**
   - 访问 [Python官网](https://www.python.org/downloads/macos/) 下载macOS版本
   - 运行安装包完成安装

#### 步骤 2: 安装依赖包
打开终端（Applications > Utilities > Terminal），执行：
```bash
pip3 install pillow pystray plyer
```

#### 步骤 3: 下载和设置程序
1. 将程序文件放到用户目录下，例如：`~/WeeklyTracker/`
2. 创建启动脚本：
   ```bash
   cd ~/WeeklyTracker
   nano start_tracker.sh
   ```
3. 在编辑器中输入：
   ```bash
   #!/bin/bash
   cd "$(dirname "$0")"
   python3 wp_gui_final.py &
   ```
4. 保存并设置执行权限：
   ```bash
   chmod +x start_tracker.sh
   ```

#### 步骤 4: 运行程序
- **方式一**: 双击 `start_tracker.sh`
- **方式二**: 在终端中执行：
  ```bash
  cd ~/WeeklyTracker
  python3 wp_gui_final.py
  ```

#### 步骤 5: 设置开机自启（可选）
1. **使用 Automator 创建应用**：
   - 打开 Automator（应用程序 > Automator）
   - 选择"应用程序"
   - 搜索并添加"运行 Shell 脚本"
   - 输入脚本内容：
     ```bash
     cd ~/WeeklyTracker
     python3 wp_gui_final.py &
     ```
   - 保存为 `WeeklyTracker.app`

2. **添加到登录项**：
   - 系统偏好设置 > 用户与群组 > 登录项
   - 点击 "+" 添加刚创建的 `WeeklyTracker.app`

---

## 快速开始 🚀

### 已完成安装？直接运行：

**Windows:**
```bash
# 双击运行（推荐）
start_tracker.bat

# 或命令行运行
python wp_gui_final.py
```

**macOS:**
```bash
# 双击运行
./start_tracker.sh

# 或命令行运行
python3 wp_gui_final.py
```

### 首次使用：

1. 🚀 **启动程序** - 程序会自动最小化到系统托盘
2. 📝 **开始记录** - 右键托盘图标选择"打开"进入主界面
3. ⚙️ **个性设置** - 点击"设置"按钮配置字体、提醒等
4. 🔔 **启用提醒** - 在设置中开启定时提醒功能
5. 🚀 **开机自启** - 可选择开机自动启动（仅Windows）

### 常用操作：

- **快速记录**: 右键托盘图标 → "快记"
- **查看主界面**: 右键托盘图标 → "打开"
- **隐藏窗口**: 按 `Esc` 键或点击窗口关闭按钮
- **保存内容**: `Ctrl+S` 或点击"💾 保存"按钮
- **插入模板**: 点击"📋 模板"按钮

## 使用指南 📖

### 主要功能

- **📝 记录编写**: 在主界面文本区域编写日记和笔记，支持撤销/重做
- **✅ 任务管理**: 右侧面板管理待办事项，□ 表示待办，✓ 表示完成
- **📊 周总结**: 自动生成本周学习进展和任务完成情况统计
- **⚙️ 设置**: 自定义字体大小、开机自启、提醒时间等偏好设置
- **🔔 定时提醒**: 在设定时间自动弹出提醒，督促记录进度
- **🚀 开机自启**: Windows系统支持开机自动启动功能

### 快捷键

- `Ctrl+S`: 保存当前内容
- `Ctrl+N`: 快速记录
- `Esc`: 隐藏窗口到托盘

### 右键菜单

在文本区域右键可以：
- ✅ 标记当前行为完成
- ⏰ 插入当前时间戳
- 📋 复制/粘贴文本

### 模板功能

点击"📋 模板"按钮可插入日记模板，包含：
- 📅 日期和星期
- ✅ 今日任务清单  
- 📚 学习内容记录
- 💼 工作记录
- 💭 备注思考

## 文件结构 📁

```
wp_gui/
├── wp_gui_final.py     # 主程序文件 (推荐使用，完整功能)
├── wp_gui.py           # 原始版本 (功能完整但复杂)
├── start_tracker.bat   # Windows启动脚本
├── start_tracker.sh    # macOS启动脚本  
├── wp_gui.bat          # 原始启动脚本
├── wp_config.json      # 配置文件
├── weekly_progress.txt # 当前周记录
├── wp_icon.ico        # 应用图标
├── archive/           # 历史记录归档
└── README.md         # 说明文档
```

## 技术特性 ⚙️

- **框架**: Python + Tkinter (纯标准库实现)
- **数据存储**: JSON配置 + UTF-8文本文件
- **系统集成**: 系统托盘、桌面通知
- **错误处理**: 完善的异常捕获和日志记录
- **跨平台**: 支持 Windows、macOS、Linux

## 界面布局 🖥️

```
┌─────────────────────────────────────────────────────────┐
│ 📅 第N周记录    [📝快记] [✅任务] [📊总结] [⚙️设置]        │
├─────────────────────────────┬───────────────────────────┤
│                             │  ✅ 待办任务              │
│  📝 今日记录                │  □ 任务1                  │
│  ┌─────────────────────────┐ │  □ 任务2                  │
│  │ [💾保存] [🔄刷新] [📋模板] │ │  ✓ 已完成任务             │
│  │ 字数:123      已保存    │ │  [➕添加] [✅完成]         │
│  └─────────────────────────┘ │                           │
│  ┌─────────────────────────┐ │  ⚡ 快捷操作               │
│  │                         │ │  [📝时间戳]               │
│  │   文本编辑区域          │ │  [📊新周开始]             │
│  │                         │ │  [📤导出记录]             │
│  │                         │ │  [🔧打开文件夹]           │
│  └─────────────────────────┘ │                           │
├─────────────────────────────┴───────────────────────────┤
│ 就绪                                         12:34:56   │
└─────────────────────────────────────────────────────────┘
```

## 常见问题 ❓

**Q: 如何备份数据？**
A: 所有数据保存在 `weekly_progress.txt` 和 `archive/` 文件夹中，定期复制即可。

**Q: 如何设置开机自启？**
A: 在设置界面中勾选"开机自动启动"选项，目前支持Windows系统。

**Q: 如何自定义提醒时间？**
A: 在设置界面的"提醒设置"中，可以设置提醒时间，格式为24小时制，用逗号分隔，如：9,14,18,21。

**Q: 程序启动后看不到窗口？**
A: 程序默认最小化到系统托盘，点击托盘图标或右键选择"打开"。

**Q: 如何恢复误删的内容？**
A: 每次新周开始会自动备份到 `archive/` 文件夹中。

**Q: 程序崩溃了怎么办？**
A: 重启程序，数据会自动恢复到最后保存状态。检查控制台错误信息。

## 故障排除 🔧

### Windows 常见问题

**问题**: `'python' 不是内部或外部命令`
**解决**: 
1. 重新安装Python，确保勾选"Add Python to PATH"
2. 或使用完整路径：`C:\Python3X\python.exe wp_gui_final.py`

**问题**: `ModuleNotFoundError: No module named 'PIL'`
**解决**: 重新安装依赖：`pip install pillow pystray plyer`

**问题**: 程序启动后看不到窗口
**解决**: 查看系统托盘右下角，找到程序图标并右键选择"打开"

**问题**: 编码错误或emoji显示异常
**解决**: 程序已优化兼容性，如仍有问题请在命令行设置：`chcp 65001`

### macOS 常见问题

**问题**: `command not found: python3`
**解决**: 安装Python：`brew install python` 或访问Python官网下载

**问题**: `Permission denied` 运行脚本
**解决**: 设置执行权限：`chmod +x start_tracker.sh`

**问题**: 系统提示无法运行未知开发者程序
**解决**: 
1. 系统偏好设置 > 安全性与隐私 > 通用
2. 选择"允许从以下位置下载的App：App Store 和被认可的开发者"
3. 或右键脚本选择"打开"

**问题**: pip安装失败
**解决**: 
1. 使用：`pip3 install --user pillow pystray plyer`
2. 或更新pip：`pip3 install --upgrade pip`

### 通用问题

**问题**: 提醒功能不工作
**解决**: 
1. 检查设置中是否启用提醒
2. 确认提醒时间设置正确
3. 安装plyer：`pip install plyer`

**问题**: 数据丢失
**解决**: 
1. 检查 `archive/` 文件夹中的备份
2. 查看 `weekly_progress.txt` 文件
3. 定期手动备份重要数据

**问题**: 程序占用内存过高
**解决**: 
1. 重启程序
2. 清理archive文件夹中的旧文件
3. 减少提醒频率

## 更新日志 📝

### v3.1.0 (当前版本) - 完整功能版
- 🚀 **新增开机自启**: Windows系统支持开机自动启动
- ⏰ **定时提醒功能**: 可配置的定时提醒，督促记录习惯
- 🔔 **桌面通知**: 系统通知提醒和状态更新
- ⚙️ **增强设置界面**: 可配置开机自启、提醒时间等
- 🔧 **完全重构**: 修复所有已知bug和代码质量问题
- 🚀 **性能优化**: 移除不必要依赖，提升启动和运行速度
- 🎨 **界面改进**: 响应式布局，更好的窗口缩放支持
- 🛡️ **稳定性增强**: 完善的异常处理和错误恢复机制
- 📝 **代码质量**: 全面重构，规范化代码结构和注释

### v2.0.0 (已移除)
- 性能问题和兼容性问题较多

### v1.0.0 (wp_gui.py)
- 🎉 原始版本，功能完整但界面复杂

## 开发者说明 👩‍💻

本次重构主要解决了以下问题：
1. **导入冲突**: 修复了 tkinter.ttk 和 ttkbootstrap 的命名冲突
2. **异常处理**: 为所有关键方法添加了 try-catch 异常处理
3. **内存泄漏**: 优化了定时器和线程管理
4. **UI响应**: 改进了界面的响应性和可缩放性
5. **代码质量**: 重构了代码结构，提高了可维护性

## 支持与反馈 💬

如遇问题或有建议，请：
- 🐛 查看控制台错误信息
- 📧 提供详细的错误描述
- 💡 分享功能改进建议

---

*让记录成为习惯，让进步看得见！* 🌟

### 4.5 保存为 App

* 文件 → 存储
* 命名为：`WPGUI_启动器.app`
* 存到你愿意放的地方（建议：`~/Applications/` 或 `~/Documents/WPGUI/`）

1. 打开「系统设置」→「用户与群组」→「登录项」
2. 找到“在登录时打开的项目”
3. 点击 `+` 按钮
4. 添加刚刚保存的 `WPGUI_启动器.app`
你可以重启电脑或者注销一次，然后观察：
* 系统顶部菜单栏是否出现你的图标（取决于 `pystray` 设置）
* 后台是否正常运行了你的 `wp_gui.py`

* `pystray` 的实现方式为 macOS 适配（建议用 `PIL.Image.open()` 而非 Windows 系统路径方法）

